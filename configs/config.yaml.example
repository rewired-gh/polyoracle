# Poly Oracle Configuration Example
# Copy this file to config.yaml and adjust values as needed
#
# This configuration is optimized for daily use - it extracts high-value signals
# from Polymarket while avoiding notification flood. The defaults focus on:
# - Significant events with real market activity (volume filtering)
# - Meaningful probability changes (not minor fluctuations)
# - Digestible notifications (2-5 key events per cycle)
#
# Based on real Polymarket API analysis (see docs/configuration-experiment-results.md):
# - 228 total events in geopolitics/tech/finance/crypto/world categories
# - Volume thresholds select top 15-20% highest quality events
# - Expected 2-4 alerts per hour with 4% threshold
# - Categories include crypto/world for broader coverage (overlap with tech/finance)

# Polymarket API configuration
polymarket:
  gamma_api_url: "https://gamma-api.polymarket.com"
  clob_api_url: "https://clob.polymarket.com"
  poll_interval: 1h                                  # Poll every hour (matches notification rhythm)
  categories:                                        # High-value categories for insights
    - geopolitics
    - tech
    - finance
    - world                                          # Global events, elections
  # Volume filtering (logical OR): Include event if ANY volume threshold is met
  # Optimized for these categories based on analysis of 228 events
  # Selects top ~30-40 events with highest market activity
  volume_24hr_min: 25000.0      # $25K minimum 24hr volume
  volume_1wk_min: 100000.0      # $100K minimum weekly volume
  volume_1mo_min: 250000.0      # $250K minimum monthly volume
  volume_filter_or: true        # true = OR (union), false = AND (intersection)
  limit: 200                    # Fetch enough events to find quality signals
  timeout: 30s                  # API request timeout
  max_retries: 3                # Number of retry attempts on API failure
  retry_delay_base: 1s          # Base delay between retries (multiplied by attempt number)
  max_idle_conns: 100           # Maximum idle HTTP connections in pool
  max_idle_conns_per_host: 10   # Maximum idle connections per host
  idle_conn_timeout: 90s        # Timeout for idle connections

# Monitoring behavior configuration
monitor:
  threshold: 0.04        # 4% change threshold (meaningful movements)
  window: 1h             # 1-hour time window (matches poll interval)
  top_k: 5               # Top 5 events per notification (digestible amount)
  enabled: true          # Enable monitoring

# Telegram notification configuration
telegram:
  bot_token: "YOUR_BOT_TOKEN_HERE"  # Get from @BotFather on Telegram
  chat_id: "YOUR_CHAT_ID_HERE"      # Get from @userinfobot on Telegram
  enabled: true                     # Enable Telegram notifications
  max_retries: 3                    # Number of retry attempts for sending messages
  retry_delay_base: 1s              # Base delay between retries

# Storage and persistence configuration
storage:
  max_events: 1000                          # Maximum events to track in memory
  max_snapshots_per_event: 24               # 24 hours of hourly snapshots
  max_file_size_mb: 100                     # Maximum persistence file size in MB
  persistence_interval: 1h                  # Save to disk every hour (matches poll interval)
  persistence_retries: 3                    # Retry attempts for Save() failures
  persistence_retry_delay: 5s              # Base delay between persistence retries
  file_permissions: 0600                    # Owner-only file permissions (recommended for security)
  dir_permissions: 0700                     # Owner-only directory permissions (recommended for security)
  file_path: ""                             # Empty = use OS tmp dir (/tmp/poly-oracle/data.json on macOS/Linux)
  data_dir: ""                              # Empty = use OS tmp dir

# Logging configuration
logging:
  level: "info"    # Log level: debug, info, warn, error
  format: "json"   # Log format: json, text

# Environment variables can override any value:
# POLY_ORACLE_TELEGRAM_BOT_TOKEN=your_token
# POLY_ORACLE_TELEGRAM_CHAT_ID=your_chat_id
# POLY_ORACLE_MONITOR_THRESHOLD=0.05
# POLY_ORACLE_POLYMARKET_POLL_INTERVAL=1h
