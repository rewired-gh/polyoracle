# Poly Oracle Test Configuration
# 15-minute polling for testing, targeting 0-3 events per cycle.
# Single interval (poll_interval) drives: polling, detection window, persistence.

polymarket:
  poll_interval: 5m
  limit: 5000
  categories:
    - geopolitics
    - tech
    - finance
    - world
  # Volume filters (OR logic): pre-filter events before scoring
  volume_24hr_min: 25000      # $25K minimum 24hr volume
  volume_1wk_min: 100000      # $100K minimum weekly volume
  volume_1mo_min: 250000      # $250K minimum monthly volume

monitor:
  # sensitivity controls the composite signal quality threshold (0.0=permissive, 1.0=strict)
  # Formula: min_score = sensitivity² × 0.05  (window-agnostic — SNR handles scale)
  #
  # Calibration guide (5m polling, typical $25K–$1M volume events):
  #   0.3 → minScore=0.0045  — very permissive; expect 5+ alerts per cycle
  #   0.4 → minScore=0.008   — catches 5%+ moves on mid-volume markets; ~2-4 alerts/cycle (recommended)
  #   0.5 → minScore=0.0125  — stricter; only strong moves on high-volume markets pass
  #   0.7 → minScore=0.0245  — filters tail-probability noise (KL amplifies <5% base prob moves)
  #
  # Note: early in a run (< detection_intervals cycles), SNR/TC both fall back to 1.0
  # because there are too few snapshots for Bessel-corrected std dev. During bootstrap,
  # score = KL × VolumeWeight only — KL is disproportionately large for low-probability
  # markets (e.g. 0.9%→0.5% scores similar to 40%→30%), so high-volume geopolitics
  # markets with tiny tail moves can slip through at sensitivity ≤ 0.5.
  # Use 0.7 to suppress this bootstrap noise.
  #
  # Example: a 7% drop on a $500K market with stable history scores ≈ 0.22 (passes at 0.7)
  # Example: a 1.1% drop on a $1M geopolitics market scores ≈ 0.016 (filtered at 0.7)
  sensitivity: 0.7
  top_k: 10

  # detection_intervals: number of poll_interval periods in the detection window.
  # Effective window = (detection_intervals + 1) × poll_interval.
  # At 5m polling: 4 → effective 25m window (5 snapshots → 4 pairs for TC discrimination)
  detection_intervals: 4

telegram:
  bot_token: "YOUR_BOT_TOKEN"
  chat_id: "YOUR_CHAT_ID"
  enabled: true

storage:
  # Tuned for 4 GiB RAM / 128 GiB SSD
  max_events: 10000                       # Track up to 10000 events
  max_snapshots_per_event: 288            # 1 days of 5-min data for SNR
  max_file_size_mb: 2048                  # Up to 2 GB persistence file

logging:
  level: debug    # Verbose for test observation
